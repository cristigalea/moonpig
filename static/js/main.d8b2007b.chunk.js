(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){},28:function(e,t,a){e.exports=a(46)},36:function(e,t,a){},38:function(e,t,a){},42:function(e,t,a){},44:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),o=a.n(c),i=a(49),s=a(8),l=a(5),u=a(6),m=a(9),p=a(7),d=a(10),f=a(47),E=a(52),h=a(50),g=a(48),b=a(51),v=(a(36),"https://cors-escape.herokuapp.com/"),y="".concat(v,"https://search.moonpig.com/api/products?size=").concat(30,"&searchFacets=occasion_level_3:occasion%3Ewell%20done%3Enew%20job"),_="".concat(v,"https://www.moonpig.com/uk/api/product/product/?mpn="),O=(a(38),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={isError:!1,isLoaded:!1},a.onLoadImage=function(){a.setState({isError:!1,isLoaded:!0})},a.onErrorImage=function(){a.setState({isError:!0})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.url,t=this.state,a=t.isLoaded,n=t.isError,c={opacity:a&&!n?1:0};return r.a.createElement("div",{className:"image__wrapper"},r.a.createElement("img",{className:"image__content",style:c,src:e,onLoad:this.onLoadImage,onError:this.onErrorImage}),!a&&!n&&r.a.createElement("img",{className:"image__loader",src:"https://dosrgfkou9o2m.cloudfront.net/cdn/3.0.0.16195/responsivemasterpage/img/3-dots@2x.gif"}),n&&r.a.createElement("img",{className:"image__error",src:"error-image.png"}))}}]),t}(n.Component)),j=(a(22),function(e){var t=e.url,a=e.id;return r.a.createElement(f.a,{to:"/cards/".concat(a),className:"card"},r.a.createElement(O,{url:t}))}),S=function(e){var t=e.items.map(function(e,t){return r.a.createElement(j,{key:t,url:e.imageUrl,id:e.id})});return r.a.createElement("div",{className:"cardGrid"},t)},N=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(c)))).render=function(){return r.a.createElement(S,{items:a.props.cards})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.getCardsList()}}]),t}(n.Component),I=Object(b.a)(Object(s.b)(function(e){return{cards:e.cards.list}},{getCardsList:function(){return function(e){e({type:"SHOW_SPINNER"}),fetch(y).then(function(e){return e.json()}).then(function(t){e({type:"CARDS_GET_LIST",payload:function(e){return{serverTotal:e.NumberOfProducts,list:e.Products.map(function(e){return{id:e.MoonpigProductNo,title:e.Title,imageUrl:e.ProductImage.Link.Href}})}}(t)}),e({type:"HIDE_SPINNER"})}).catch(function(t){e({type:"HIDE_SPINNER"}),console.error(t)})}}})(N)),w=(a(42),function(e){var t=e.text,a=e.handler,n=e.type,c=void 0===n?"primary":n;return r.a.createElement("div",{className:"button button__".concat(c),onClick:a},t)}),D=(a(44),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){return a.props.getCardDetails(a.props.match.params.id)},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.selected,t=e.title,a=e.buyUrl,n=void 0===a?"#":a,c=e.imageUrls,o=c&&c.map(function(e,t){return r.a.createElement(O,{key:"image-".concat(t),url:e})});return r.a.createElement("div",{className:"cardDetails"},r.a.createElement("div",{className:"cardDetails__images"},o),r.a.createElement("div",{className:"cardDetails__info"},r.a.createElement("h3",null,t),c&&c.length&&r.a.createElement("div",{className:"cardDetails__actions"},r.a.createElement(f.a,{to:"/cards"},r.a.createElement(w,{text:"Back",type:"danger"})),r.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(w,{text:"Buy"})))))}}]),t}(n.Component)),k=Object(b.a)(Object(s.b)(function(e){return{selected:e.cards.selected}},{getCardDetails:function(e){return function(t){t({type:"SHOW_SPINNER"}),function(e){return fetch("".concat(_).concat(e)).then(function(e){return e.json()})}(e).then(function(e){t({type:"CARDS_GET_DETAILS",payload:function(e){return{title:e.Title,buyUrl:e.ProductUrl,imageUrls:e.ImageUrls.map(function(e){return e.ImageUrl})}}(e)}),t({type:"HIDE_SPINNER"})}).catch(function(e){t({type:"HIDE_SPINNER"}),console.error(e)})}}})(D)),T=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.isSpinnerShowing;return r.a.createElement("div",{className:"App"},r.a.createElement(f.a,{to:"/"},r.a.createElement("h1",{className:"App__title"},"Cards")),r.a.createElement("hr",null),r.a.createElement("div",null,e&&r.a.createElement("div",{className:"App__loading"},"Loading..."),r.a.createElement(E.a,null,r.a.createElement(h.a,{exact:!0,from:"/",to:"/cards"}),r.a.createElement(g.a,{path:"/cards/:id",component:k}),r.a.createElement(g.a,{path:"/cards",component:I}))))}}]),t}(n.Component),C=Object(b.a)(Object(s.b)(function(e){return{isSpinnerShowing:e.layout.isSpinnerShowing}})(T)),L=a(12),P=a(26),R=a(27),A=a(13),H={serverTotal:0,list:[],selected:{}},U={isSpinnerShowing:!1},x=Object(L.combineReducers)({cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CARDS_GET_LIST":return Object(A.a)({},e,{list:t.payload.list,serverTotal:t.payload.serverTotal,selected:{}});case"CARDS_GET_DETAILS":return Object(A.a)({},e,{selected:t.payload});default:return e}},layout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;switch((arguments.length>1?arguments[1]:void 0).type){case"SHOW_SPINNER":return Object(A.a)({},e,{isSpinnerShowing:!0});case"HIDE_SPINNER":return Object(A.a)({},e,{isSpinnerShowing:!1});default:return e}}}),G=Object(L.createStore)(x,Object(P.composeWithDevTools)(Object(L.applyMiddleware)(R.a)));o.a.render(r.a.createElement(s.a,{store:G},r.a.createElement(i.a,{basename:"/"},r.a.createElement(C,null))),document.getElementById("root"))}},[[28,2,1]]]);
//# sourceMappingURL=main.d8b2007b.chunk.js.map